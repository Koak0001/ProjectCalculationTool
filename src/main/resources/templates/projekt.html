<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${project != null ? project.projectName : 'Projekt ikke fundet, kontakt support'}"></title>
</head>
<body>
<div th:if="${project != null && !project.isArchived() &&  #strings.equalsIgnoreCase(role, 'projektleder')}">
    <a  th:href="@{'/oversigt/' + ${project.projectName} + '/rediger_projekt/' + ${project.projectId} +'?projectId=' + ${project.projectId}}">Rediger projekt</a>
    <br>
    <a  th:href="@{'/oversigt/' + ${project.projectName} + '/rediger_projektgruppe' +'?projectId=' + ${project.projectId}}">Rediger projektgruppens medlemmer</a>
    <br>
    <a th:href="@{'/oversigt/' + ${project.projectName} + '/opret_delprojekt' +'?projectName=' + ${project.projectName} +'&parentProjectId=' + ${project.projectId}}">Tilf√∏j delprojekt</a>
</div>
<form th:if="${#strings.equalsIgnoreCase(role, 'projektleder')}" th:action="@{/oversigt/arkiver_projekt}" method="post">
    <input type="hidden" name="projectId" th:value="${project.projectId}" />
    <input type="hidden" name="isArchived" th:value="${project.isArchived ? false : true}" />
    <button type="submit" th:text="${project.isArchived} ? 'Flyt til aktuelle projekter' : 'Arkiver projekt'"></button>
</form>
<br>
<form th:if="${project != null && project.isArchived() &&  #strings.equalsIgnoreCase(role, 'projektleder')}" th:action="@{'/oversigt/slet_projekt/' + ${project.projectName} +'?projectId=' + ${project.projectId}}" method="post">
    <button type="submit" class="btn btn-danger" onclick="return confirm('Advarsel! Dette er en permanent handling og projektet slettes permanent fra databasen!')">Slet projektet</button>
</form>
<br>
<h4 th:if="${subprojects.isEmpty()}" th:text="'Ingen delprojekter fundet for '+ ${project.projectName}"></h4>
<br>
<p th:text="${project.description}"></p>
<br>
<div th:if="${subprojects != null}" th:each="subProject : ${subprojects}" class="subproject-list">
    <h2 th:text="${subProject.projectName}"></h2>
    <a th:href="@{'/oversigt/' + ${subProject.projectName} + '/opgaver'+'?subProjectId=' + ${subProject.projectId} + '&userRole=' + ${subProject.userRole} + '&archived='+${project.isArchived()}}" class="task-button">Se delprojekt!</a>

    <p th:text="${subProject.hours}"></p>

</div>
</body>
</html>